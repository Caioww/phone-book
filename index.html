<html ng-app="listaTelefonica">

<head>
    <meta charset="UTF-8" />
    <title>
        Lista Telefonica
    </title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
        integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="css/app.css">
    <link rel="stylesheet" type="text/css" href="css/ui.css">

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.0/angular.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-messages/1.8.2/angular-messages.min.js"></script>
    <script src="http://code.angularjs.org/1.6.2/i18n/angular-locale_pt-br.js"></script>
    <script src="js/app.js"></script>
    <script src="js/controllers/listaTelefonicaCtrl.js"></script>
    <script src="js/service/contatosAPIService.js"></script>
    <script src="js/service/operadorasAPIService.js"></script>
    <script src="js/config/configValue.js"></script>
    <script src="js/service/serialGeneratorService.js"></script>
    <script src="js/filters/nameFilter.js"></script>
    <script src="js/filters/ellipsisFilter.js"></script>
    <script src="js/directives/uiAlertDirective.js"></script>
    <script src="js/directives/uiDateDirective.js"></script>
    <script src="js/directives/uiAccordionDirective.js"></script>

</head>

<body ng-controller="listaTelefonicaCtrl">
    <div class="jumbotron">

        <ui-accordions>
            <ui-accordion title="Accordion 1">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla justo diam, euismod vel arcu et, blandit
                ornare quam. Vivamus euismod, sapien sit amet elementum accumsan, metus ligula molestie velit, a feugiat
                ipsum dui ut orci. Aenean sollicitudin nec elit sit amet condimentum. Mauris quis odio sed elit posuere
                vehicula.
            </ui-accordion>
            <ui-accordion title="Accordion 2">
                Proin efficitur mi vitae elit aliquam, sed eleifend odio mattis. Aliquam nulla odio, suscipit nec dolor
                egestas, vulputate ullamcorper ligula. Suspendisse posuere ornare ex, ac mollis neque sagittis et. Etiam
                sagittis odio lectus, sit amet commodo arcu placerat ac.
            </ui-accordion>
        </ui-accordions>

        <h1>{{app}}</h1>
        <ui-alert title="Ops, aconteceu um problema!" message="error"></ui-alert>


        <input type="text" class="form-control" ng-model="busca" placeholder="O que você está buscando?" />
        <table ng-show="contatos.length > 0" class="table table-striped">
            <tr>
                <th></th>
                <th>Serial</th>
                <th><a href="" ng-click="ordernarPor('nome')">Nome</a></th>
                <th><a href="" ng-click="ordernarPor('telefone')">Telefone</a></th>
                <th>Operadora</th>
                <th>Data</th>
            </tr>
            <tr ng-class="{'selecionado negrito': contato.selecionado}"
                ng-repeat="contato in contatos | filter:{nome: busca} | orderBy:criterioDeOrdenacao:direcaoDaOrdenacao">
                <td><input type="checkbox" ng-model="contato.selecionado" /></td>
                <td>{{contato.serial}}</td>
                <td>{{contato.nome | name | ellipsis}}</td>
                <td>{{contato.telefone}}</td>
                <td>{{contato.operadora.nome}}</td>
                <td>{{contato.data | date:'dd/MM/yyyy'}}</td>
            </tr>
        </table>
        <hr />

        <form name="contatoForm">
            <input class="form-control" type="text" ng-model="contato.nome" name="nome" placeholder="Insira o nome"
                ng-required="true" ng-minlength="10" />
            <input class="form-control" type="text" ng-model="contato.telefone" name="telefone"
                placeholder="Insira o telefone" ng-required="true" ng-pattern="/^\d{4,5}-\d{4}$/" />
            <input class="form-control" type="text" ng-model="contato.data" name="data" placeholder="Data" ui-date />
            <select class="form-control" ng-model="contato.operadora"
                ng-options="operadora.nome + ' ( ' + (operadora.preco | currency) + ' ) ' for operadora in operadoras | orderBy:'nome'">
                <option value="">Selecione uma operadora</option>
            </select>

        </form>

        <div ng-show="contatoForm.nome.$dirty" ng-messages="contatoForm.nome.$error">

            <div ng-message="required" class="alert alert-danger">
                Por favor, preencha o nome!
            </div>

            <div ng-message="minlength" class="alert alert-danger">
                O campo nome deve ter no mínimo 10 caracteres.
            </div>

        </div>


        <div ng-show="contatoForm.telefone.$error.required && contatoForm.telefone.$dirty" class=" alert alert-danger">
            Por favor, preencha o telefone!
        </div>

        <div ng-show="contatoForm.telefone.$error.pattern && contatoForm.telefone.$dirty" class=" alert alert-danger">
            O campo telefone deve ter o formato DDDDD-DDDD!
        </div>


        <button class="btn btn-primary btn-block" ng-click="adicionarContato(contato)"
            ng-disabled="contatoForm.$invalid">Adicionar Contato</button>
        <button class="btn btn-danger btn-block" ng-click="apagarContatos(contatos)"
            ng-disabled="!isContatoSelecionado(contatos)">Apagar Contatos</button>
    </div>
</body>

<div ng-include="'views/footer.html'"></div>

</html>